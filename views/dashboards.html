<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MQ-FIRE - Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root {
      --mq-red: #fb5757;
    }
    body {
      background: #f3f3f3;
    }
  </style>
</head>
<body class="min-h-screen font-sans pb-16 relative overflow-x-hidden">
    
    <img src="imgs/fumaca.png" 
         class="absolute right-0 top-0 w-[600px] h-auto 
                transform translate-x-[20%] -translate-y-[10%] 
                rotate-[-10deg] opacity-90 z-10 hidden lg:block">

    <!-- Conteúdo principal -->
    <main class="max-w-7xl mx-auto px-6 lg:px-12 pt-12 relative z-20">
        <h1 class="text-4xl font-normal text-gray-800 tracking-tight mb-12 mt-16">Dashboards</h1>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8">
          <!-- Card 1: Número de Alertas Hoje -->
          <div class="bg-white shadow rounded-lg p-8">
            <h1 class="text-sm font-semibold text-gray-600 mb-4">Número de Alertas<br>Hoje</h1>
            <h2 class="text-6xl font-bold text-gray-800" id="alertas-hoje">0</h2>
          </div>

          <!-- Card 2: Sensores em Alerta -->
          <div class="bg-white shadow rounded-lg p-8">
            <h1 class="text-sm font-semibold text-gray-600 mb-4">Sensores em Alerta no<br>Momento</h1>
            <h2 class="text-6xl font-bold text-gray-800" id="sensores-alerta">0</h2>
          </div>

          <!-- Card 3: Intervalo médio entre alertas -->
          <div class="bg-white shadow rounded-lg p-8">
            <h1 class="text-sm font-semibold text-gray-600 mb-4">Intervalo médio<br>entre alertas</h1>
            <h2 class="text-6xl font-bold text-gray-800" id="intervalo-alertas">00:00</h2>
          </div>
        </div>
    </main>

    <!-- Scripts -->
    <script type="module" src="components/header.js"></script>
    <script>
      async function carregarDadosDashboard() {
        try {
          const resposta = await fetch('/alertas/dashboard');
          if (!resposta.ok) throw new Error('Erro ao buscar dados');
          
          const dados = await resposta.json();
          document.getElementById('alertas-hoje').innerText = dados.alertasHoje;
          document.getElementById('sensores-alerta').innerText = dados.sensoresEmAlerta;
          document.getElementById('intervalo-alertas').innerText = dados.intervaloMedio;
        } catch (erro) {
          console.error('Erro:', erro);
        }
      }
      carregarDadosDashboard();
    </script>
</body>
</html>
